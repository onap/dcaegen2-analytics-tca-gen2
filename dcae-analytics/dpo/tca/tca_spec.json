{
  "self": {
    "name": "docker.tca",
    "version": "1.0.5",
    "description": "TCA Docker Application",
    "component_type": "docker"
  },
  "streams": {
    "subscribes": [
      {
        "config_key": "tca_handle_in",
        "format": "VES_specification",
        "version": "5.28.4",
        "type": "message router"
      }
    ],
    "publishes": [
      {
        "config_key": "tca_handle_out",
        "format": "TCA Alert Definition",
        "version": "1.0.0",
        "type": "message router"
      }
    ]
  },
  "services": {
    "calls": [
      {
        "config_key": "aai_broker_handle",
        "verb": "GET",
        "request": {
          "format": "get_with_query_params",
          "version": "1.0.0"
        },
        "response": {
          "format": "aai_broker_response",
          "version": "3.0.0"
        }
      }
    ],
    "provides": []
  },
  "auxilary": {
    "healthcheck": {
      "type": "http",
      "interval": "30s",
      "timeout": "10s",
      "endpoint": "actuator/health"
    }
  },
  "artifacts": [
    {
      "uri": "docker_repository.com:5100/org.onap.dcae.analytics/dcae-analytics-web:1.0",
      "type": "docker image"
    }
  ],
  "parameters": [
    {
      "name": "spring.mongodb.uri",
      "value": "mongodb://localhost:27017/analytics-tca",
      "description": "Mongodb database uri",
      "designer_editable": true,
      "sourced_at_deployment": true,
      "policy_editable": false,
      "type": "string",
      "required": true
    },
    {
      "name": "tca.policy",
      "value": "{\"domain\":\"measurementsForVfScaling\",\"metricsPerEventName\":[{\"eventName\":\"Mfvs_eNodeB_RANKPI\",\"controlLoopSchemaType\":\"VNF\",\"policyScope\":\"resource=vFirewall;type=configuration\",\"policyName\":\"configuration.dcae.microservice.tca.xml\",\"policyVersion\":\"v0.0.1\",\"thresholds\":[{\"closedLoopControlName\":\"CL-FRWL-LOW-TRAFFIC-SIG-d925ed73-8231-4d02-9545-db4e101f88f8\",\"closedLoopEventStatus\":\"ONSET\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":4000,\"direction\":\"LESS_OR_EQUAL\",\"severity\":\"MAJOR\"},{\"closedLoopControlName\":\"CL-FRWL-HIGH-TRAFFIC-SIG-EA36FE84-9342-5E13-A656-EC5F21309A09\",\"closedLoopEventStatus\":\"ONSET\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":20000,\"direction\":\"GREATER_OR_EQUAL\",\"severity\":\"CRITICAL\"},{\"closedLoopControlName\":\"CL-FRWL-HIGH-TRAFFIC-SIG-EA36FE84-9342-5E13-A656-EC5F21309A09\",\"closedLoopEventStatus\":\"ABATED\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":0,\"direction\":\"EQUAL\",\"severity\":\"CRITICAL\"}]},{\"eventName\":\"vLoadBalancer\",\"controlLoopSchemaType\":\"VNF\",\"policyScope\":\"resource=vLoadBalancer;type=configuration\",\"policyName\":\"configuration.dcae.microservice.tca.xml\",\"policyVersion\":\"v0.0.1\",\"thresholds\":[{\"closedLoopControlName\":\"CL-LBAL-LOW-TRAFFIC-SIG-FB480F95-A453-6F24-B767-FD703241AB1A\",\"closedLoopEventStatus\":\"ONSET\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":500,\"direction\":\"LESS_OR_EQUAL\",\"severity\":\"MAJOR\"},{\"closedLoopControlName\":\"CL-LBAL-LOW-TRAFFIC-SIG-0C5920A6-B564-8035-C878-0E814352BC2B\",\"closedLoopEventStatus\":\"ONSET\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":5000,\"direction\":\"GREATER_OR_EQUAL\",\"severity\":\"CRITICAL\"}]},{\"eventName\":\"virtualVMEventName\",\"controlLoopSchemaType\":\"VM\",\"policyScope\":\"resource=virtualVM;type=configuration\",\"policyName\":\"configuration.dcae.microservice.tca.xml\",\"policyVersion\":\"v0.0.1\",\"thresholds\":[{\"closedLoopControlName\":\"CL-LBAL-LOW-TRAFFIC-SIG-FB480F95-A453-6F24-B767-FD703241AB1A\",\"closedLoopEventStatus\":\"ONSET\",\"version\":\"1.0.2\",\"fieldPath\":\"$.event.measurementsForVfScalingFields.vNicPerformanceArray[*].receivedBroadcastPacketsAccumulated\",\"thresholdValue\":500,\"direction\":\"LESS_OR_EQUAL\",\"severity\":\"MAJOR\"}]}]}",
      "description": "Threshold Crossing Alert Policy JSON as string",
      "designer_editable": false,
      "sourced_at_deployment": false,
      "policy_editable": true,
      "type": "string",
      "required": true
    },
    {
      "name": "tca.processing_batch_size",
      "value": 10000,
      "description": "Batch size for TCA Application Transaction",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "tca.enable_abatement",
      "value": true,
      "description": "Enables / Disables TCA Alerts Abatement",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "boolean",
      "required": false
    },
    {
      "name": "tca.enable_ecomp_logging",
      "value": true,
      "description": "Enables / Disables ECOMP Logging",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "boolean",
      "required": false
    },
    {
      "name": "tca.aai.enable_enrichment",
      "value": false,
      "description": "Enables / Disables TCA A&AI Enrichment",
      "designer_editable": true,
      "sourced_at_deployment": true,
      "policy_editable": false,
      "type": "boolean",
      "required": false
    },
    {
      "name": "tca.aai.url",
      "value": "http://localhost:8443",
      "description": "A&AI Enrichment Service URL. Required only if A&AI Enrichment is enabled",
      "designer_editable": true,
      "sourced_at_deployment": true,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "tca.aai.username",
      "value": "DCAE",
      "description": "A&AI Enrichment Service basic authentication user name",
      "designer_editable": true,
      "sourced_at_deployment": true,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "tca.aai.password",
      "value": "DCAE",
      "description": "A&AI Enrichment Service basic authentication user password",
      "designer_editable": true,
      "sourced_at_deployment": true,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "tca.aai.generic_vnf_path",
      "value": "aai/v11/network/generic-vnfs/generic-vnf",
      "description": "A&AI Enrichment Service VNF query endpoint path",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "tca.aai.node_query_path",
      "value": "aai/v11/search/nodes-query",
      "description": "A&AI Enrichment Service Node query endpoint path",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.consumer_group",
      "value": "cg1",
      "description": "Subscriber consumer group",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.consumer_ids[0]",
      "value": "c0",
      "description": "Subscriber first consumer id",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.consumer_ids[1]",
      "value": "c1",
      "description": "Subscriber second consumer id",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "string",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.message_limit",
      "value": 50000,
      "description": "Maximum message fetched by TCA Subscriber",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": true
    },
    {
      "name": "streams_subscribes.tca_handle_in.timeout",
      "value": -1,
      "description": "Timeout for TCA Subscriber",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.polling.fixedRate",
      "value": 0,
      "description": "Subscriber fixed polling interval in milliseconds. Value of 0 indicated auto adjusting polling will be used",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.polling.auto_adjusting.min",
      "value": 30000,
      "description": "Subscriber Auto Adjusting polling minimum interval in milliseconds",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.polling.auto_adjusting.step_up",
      "value": 10000,
      "description": "Subscriber Auto Adjusting polling step up delta in milliseconds when message is not found",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.polling.auto_adjusting.max",
      "value": 60000,
      "description": "Subscriber Auto Adjusting polling maximum interval in milliseconds",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    },
    {
      "name": "streams_subscribes.tca_handle_in.polling.auto_adjusting.step_down",
      "value": 30000,
      "description": "Subscriber Auto Adjusting polling step down delta in milliseconds when message is found",
      "designer_editable": true,
      "sourced_at_deployment": false,
      "policy_editable": false,
      "type": "number",
      "required": false
    }
  ]
}
